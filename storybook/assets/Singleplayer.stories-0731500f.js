import{a as h,j as y}from"./jsx-runtime-f8e698f3.js";import{c as F,B as b}from"./Button-65b3b1ee.js";import{R as te,r as g}from"./index-f1f2c4b1.js";import"./standaloneUtils-1446f3b8.js";const le=""+new URL("isles-5c297034.png",import.meta.url).href;/**
 * filesize
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.0.12
 */const ae="array",oe="bit",q="bits",ce="byte",K="bytes",N="",se="exponent",ue="function",M="iec",de="Invalid number",fe="Invalid rounding method",B="jedec",me="object",V=".",he="round",ve="s",pe="kbit",ge="kB",ye=" ",we="string",_e="0",j={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Se(i,{bits:e=!1,pad:r=!1,base:t=-1,round:n=2,locale:u=N,localeOptions:l={},separator:a=N,spacer:m=ye,symbols:s={},standard:o=N,output:f=we,fullform:p=!1,fullforms:v=[],exponent:w=-1,roundingMethod:T=he,precision:R=0}={}){let d=w,E=Number(i),c=[],S=0,k=N;t===-1&&o.length===0?(t=10,o=B):t===-1&&o.length>0?(o=o===M?M:B,t=o===M?2:10):(t=t===2?2:10,o=t===10||o===B?B:M);const I=t===10?1e3:1024,ie=p===!0,z=E<0,W=Math[T];if(typeof i!="bigint"&&isNaN(i))throw new TypeError(de);if(typeof W!==ue)throw new TypeError(fe);if(z&&(E=-E),(d===-1||isNaN(d))&&(d=Math.floor(Math.log(E)/Math.log(I)),d<0&&(d=0)),d>8&&(R>0&&(R+=8-d),d=8),f===se)return d;if(E===0)c[0]=0,k=c[1]=j.symbol[o][e?q:K][d];else{S=E/(t===2?Math.pow(2,d*10):Math.pow(1e3,d)),e&&(S=S*8,S>=I&&d<8&&(S=S/I,d++));const C=Math.pow(10,d>0?n:0);c[0]=W(S*C)/C,c[0]===I&&d<8&&w===-1&&(c[0]=1,d++),k=c[1]=t===10&&d===1?e?pe:ge:j.symbol[o][e?q:K][d]}if(z&&(c[0]=-c[0]),R>0&&(c[0]=c[0].toPrecision(R)),c[1]=s[c[1]]||c[1],u===!0?c[0]=c[0].toLocaleString():u.length>0?c[0]=c[0].toLocaleString(u,l):a.length>0&&(c[0]=c[0].toString().replace(V,a)),r&&Number.isInteger(c[0])===!1&&n>0){const C=a||V,Y=c[0].toString().split(C),G=Y[1]||N,U=G.length,ne=n-U;c[0]=`${Y[0]}${C}${G.padEnd(U+ne,_e)}`}return ie&&(c[1]=v[d]?v[d]:j.fullform[o][d]+(e?oe:ce)+(c[0]===1?N:ve)),f===ae?c:f===me?{value:c[0],symbol:c[1],exponent:d,unit:k}:c.join(m)}function L(i,e){var r,t;if(i===e)return!0;if(i&&e&&(r=i.constructor)===e.constructor){if(r===Date)return i.getTime()===e.getTime();if(r===RegExp)return i.toString()===e.toString();if(r===Array&&(t=i.length)===e.length){for(;t--&&L(i[t],e[t]););return t===-1}if(r===Object){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(t in i)if(!(t in e)||!L(i[t],e[t]))return!1;return!0}}return i!==i&&e!==e}function Ee(i){const e=te.useRef([]);return L(i,e.current)||(e.current=i),e.current}function be(i,e){return te.useMemo(i,Ee(e))}function Ne(i,e,r,t){const n=g.useRef(r);n.current=r;const u=be(()=>t,[t]);g.useEffect(()=>{if(!i)return;const l=a=>n.current.call(i,a);return i.addEventListener(e,l,u),()=>{i.removeEventListener(e,l,u)}},[i,e,u])}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ce=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],P=Ce.join(","),re=typeof Element>"u",D=re?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,O=!re&&Element.prototype.getRootNode?function(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}:function(i){return i==null?void 0:i.ownerDocument},x=function i(e,r){var t;r===void 0&&(r=!0);var n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"inert"),u=n===""||n==="true",l=u||r&&e&&i(e.parentNode);return l},Be=function(e,r,t){if(x(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(P));return r&&D.call(e,P)&&n.unshift(e),n=n.filter(t),n},De=function i(e,r,t){for(var n=[],u=Array.from(e);u.length;){var l=u.shift();if(!x(l,!1))if(l.tagName==="SLOT"){var a=l.assignedElements(),m=a.length?a:l.children,s=i(m,!0,t);t.flatten?n.push.apply(n,s):n.push({scopeParent:l,candidates:s})}else{var o=D.call(l,P);o&&t.filter(l)&&(r||!e.includes(l))&&n.push(l);var f=l.shadowRoot||typeof t.getShadowRoot=="function"&&t.getShadowRoot(l),p=!x(f,!1)&&(!t.shadowRootFilter||t.shadowRootFilter(l));if(f&&p){var v=i(f===!0?l.children:f.children,!0,t);t.flatten?n.push.apply(n,v):n.push({scopeParent:l,candidates:v})}else u.unshift.apply(u,l.children)}}return n},Te=function(e){return e.tagName==="INPUT"},Re=function(e){return Te(e)&&e.type==="hidden"},Ie=function(e){var r=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(t){return t.tagName==="SUMMARY"});return r},Me=function(e){var r,t=e&&O(e),n=(r=t)===null||r===void 0?void 0:r.host,u=!1;if(t&&t!==e){var l,a,m;for(u=!!((l=n)!==null&&l!==void 0&&(a=l.ownerDocument)!==null&&a!==void 0&&a.contains(n)||e!=null&&(m=e.ownerDocument)!==null&&m!==void 0&&m.contains(e));!u&&n;){var s,o,f;t=O(n),n=(s=t)===null||s===void 0?void 0:s.host,u=!!((o=n)!==null&&o!==void 0&&(f=o.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return u},Z=function(e){var r=e.getBoundingClientRect(),t=r.width,n=r.height;return t===0&&n===0},Ae=function(e,r){var t=r.displayCheck,n=r.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var u=D.call(e,"details>summary:first-of-type"),l=u?e.parentElement:e;if(D.call(l,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof n=="function"){for(var a=e;e;){var m=e.parentElement,s=O(e);if(m&&!m.shadowRoot&&n(m)===!0)return Z(e);e.assignedSlot?e=e.assignedSlot:!m&&s!==e.ownerDocument?e=s.host:e=m}e=a}if(Me(e))return!e.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return Z(e);return!1},xe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var r=e.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var t=0;t<r.children.length;t++){var n=r.children.item(t);if(n.tagName==="LEGEND")return D.call(r,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}r=r.parentElement}return!1},$=function(e,r){return!(r.disabled||x(r)||Re(r)||Ae(r,e)||Ie(r)||xe(r))},ke=function(e,r){r=r||{};var t;return r.getShadowRoot?t=De([e],r.includeContainer,{filter:$.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):t=Be(e,r.includeContainer,$.bind(null,r)),t};const je="_root_14ojz_1",Fe="_content_14ojz_7",Le="_world_root_14ojz_20",Pe="_world_info_14ojz_27",Oe="_world_image_14ojz_33",ze="_world_focused_14ojz_38",We="_title_14ojz_42",_={root:je,content:Fe,world_root:Le,world_info:Pe,world_image:Oe,world_focused:ze,title:We},Ye="_container_acsky_1",Ge="_input_acsky_10",J={container:Ye,input:Ge},Ue=({autoFocus:i,onEnterPress:e,...r})=>{const t=g.useRef(null);return g.useEffect(()=>{e&&t.current.addEventListener("keydown",n=>{n.code==="Enter"&&e(n)}),!(!i||matchMedia("(pointer: coarse)").matches)&&t.current.focus()},[]),h("div",{className:J.container,children:h("input",{ref:t,className:J.input,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",spellCheck:"false",...r})})};try{Input.displayName="Input",Input.__docgenInfo={description:"",displayName:"Input",props:{autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},onEnterPress:{defaultValue:null,description:"",name:"onEnterPress",required:!1,type:{name:"((e: any) => void)"}}}}}catch{}const qe=({name:i,isFocused:e,title:r,lastPlayed:t,size:n,detail:u="",onFocus:l,onInteraction:a})=>{const m=g.useMemo(()=>{if(!t)return;const o=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),f=Date.now()-t,p=Math.floor(f/1e3/60),v=Math.floor(p/60),w=Math.floor(v/24);return w>0?o.format(-w,"day"):v>0?o.format(-v,"hour"):o.format(-p,"minute")},[t]),s=g.useMemo(()=>{if(n)return Se(n)},[n]);return y("div",{className:F(_.world_root,e?_.world_focused:void 0),tabIndex:0,onFocus:()=>l==null?void 0:l(i),onKeyDown:o=>{(o.code==="Enter"||o.code==="Space")&&(o.preventDefault(),a==null||a(o.code==="Enter"?"enter":"space"))},onDoubleClick:()=>a==null?void 0:a("enter"),children:[h("img",{className:_.world_image,src:le}),y("div",{className:_.world_info,children:[h("div",{className:_.world_title,title:"level.dat world name",children:r}),y("div",{className:"muted",children:[m," ",u.slice(-30)]}),h("div",{className:"muted",children:s})]})]})},X=({worldData:i,onGeneralAction:e,onWorldAction:r})=>{const t=g.useRef(),n=g.useRef(null);Ne(window,"keydown",s=>{if(s.code==="ArrowDown"||s.code==="ArrowUp"){s.preventDefault();const o=s.code==="ArrowDown"?1:-1,f=ke(t.current),p=f.indexOf(document.activeElement);if(p===-1)return;const v=f[p+o];v==null||v.focus()}});const[u,l]=g.useState(""),[a,m]=g.useState("");return y("div",{ref:t,children:[h("div",{className:"dirt-bg"}),y("div",{className:F("fullscreen",_.root),children:[y("div",{style:{display:"flex",flexDirection:"column"},children:[h("span",{className:F("screen-title",_.title),children:"Select Saved World"}),h(Ue,{autoFocus:!0,value:u,onChange:({target:{value:s}})=>l(s)})]}),h("div",{className:_.content,children:i.filter(s=>s.title.toLowerCase().includes(u.toLowerCase())).map(({name:s,title:o,size:f,lastPlayed:p,detail:v})=>h(qe,{title:o,lastPlayed:p,size:f,name:s,onFocus:m,isFocused:a===s,onInteraction:w=>{var T;w==="enter"?r("load",s):w==="space"&&((T=n.current)==null||T.focus())},detail:v},s))}),y("div",{style:{display:"flex",flexDirection:"column",minWidth:400},children:[y("div",{children:[h(b,{rootRef:n,disabled:!a,onClick:()=>r("load",a),children:"LOAD WORLD"}),h(b,{onClick:()=>e("create"),children:"Create New World"})]}),y("div",{children:[h(b,{style:{width:100},disabled:!a,onClick:()=>r("export",a),children:"Export"}),h(b,{style:{width:100},disabled:!a,onClick:()=>r("delete",a),children:"Delete"}),h(b,{style:{width:100},onClick:()=>r("edit",a),disabled:!0,children:"Edit"}),h(b,{style:{width:100},onClick:()=>e("cancel"),children:"Cancel"})]})]})]})]})};try{Singleplayer.displayName="Singleplayer",Singleplayer.__docgenInfo={description:"",displayName:"Singleplayer",props:{worldData:{defaultValue:null,description:"",name:"worldData",required:!0,type:{name:"WorldProps[]"}},onWorldAction:{defaultValue:null,description:"",name:"onWorldAction",required:!0,type:{name:'(action: "load" | "export" | "delete" | "edit", worldName: string) => void'}},onGeneralAction:{defaultValue:null,description:"",name:"onGeneralAction",required:!0,type:{name:'(action: "cancel" | "create") => void'}}}}}catch{}const Je={component:X,render({open:i}){return h(X,{worldData:Array.from({length:100}).map((e,r)=>({name:"test"+r,title:"Test Save "+r,lastPlayed:Date.now()-6e5,size:1e5})),onWorldAction:()=>{},onGeneralAction:()=>{}})}},A={args:{}};var Q,H,ee;A.parameters={...A.parameters,docs:{...(Q=A.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  args: {}
}`,...(ee=(H=A.parameters)==null?void 0:H.docs)==null?void 0:ee.source}}};const Xe=["Primary"];export{A as Primary,Xe as __namedExportsOrder,Je as default};
//# sourceMappingURL=Singleplayer.stories-0731500f.js.map
